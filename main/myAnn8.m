function [y1] = myAnn8(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 30-Sep-2016 22:32:48.
% 
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 27xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [47;44;46;38;43;46;36;41;46;42;46;47;40;48;46;33;47;45;46;41;45;46;42;45;45;42;46];
  x1_step1_gain = [0.00961538461538462;0.00947867298578199;0.00956937799043062;0.00921658986175115;0.00943396226415094;0.00956937799043062;0.0091324200913242;0.00934579439252336;0.00956937799043062;0.00938967136150235;0.00956937799043062;0.00961538461538462;0.00930232558139535;0.00966183574879227;0.00956937799043062;0.00900900900900901;0.00961538461538462;0.00952380952380952;0.00956937799043062;0.00934579439252336;0.00952380952380952;0.00956937799043062;0.00938967136150235;0.00952380952380952;0.00952380952380952;0.00938967136150235;0.00956937799043062];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-0.17468627696328842;0.18101470941635447;4.2390624798976431;0.18305725993957747;0.90664162022722505;-1.4367701969780708;-2.1793838343997818;5.9281628221087512;0.20734333186570436;0.41479956905525361];
  IW1_1 = [-0.22563754891271051 -0.11075540182752434 0.1042241471224678 -0.53183636114428667 -0.13114883435304778 -0.13899708266866936 -0.31028235628792084 0.088080315543815721 0.21449733397724871 -0.06973935462068212 0.35246489485387733 0.22155739483327358 -0.27776595088574241 0.094392971532183012 0.15705774184802254 0.21634200000835521 0.29748895823554711 0.32841903931463284 -0.15913056570240716 -0.054862432643758972 0.046630586493636036 -0.3482324965101023 0.066491685294387204 0.10645586019300728 -0.074462962374552299 0.0033172345113444499 0.081836294964248851;-0.058465232464496676 -0.17027590505925752 -0.26034286474189089 0.088622400082935343 0.074084716609251811 0.10486387979715127 0.21846466432951991 -0.049646334257435296 -0.26396406982740633 0.12742325004185917 -0.15249274062318355 -0.072610681843278402 0.10610597609093775 0.00060396261756615554 -0.24947951864767573 0.30540145131948371 0.15870499782050596 -0.10666326328298936 0.16113493773116669 -0.33552549414185684 -0.14722516768905797 0.19824838489747512 0.084099729761226732 -0.043473382461237151 0.12751054892943986 -0.06342594615132495 -0.062128192945666801;-1.4278315505840915 1.1151586585461781 1.4807253068197561 -2.5629795249023801 -0.0088004470226675739 0.51418165417299055 -1.0142388714385073 0.68647067756028224 1.8980522120933232 -1.2764409411910802 0.34384741733342511 1.0637718824085229 -2.4553333266502255 -0.28733169674694559 -0.019444686009639344 -1.3823005628114655 0.96862115701486606 1.1729854464363874 -1.4363513606348202 1.9316009582675462 1.2524391735129647 -2.2705072794498538 0.66477341373968191 1.742961806412028 -1.0583852701852534 1.1003835313622801 1.7224415990847102;0.18340163863384537 0.078887506211926847 -0.010034405993478036 0.52466514932736363 0.13171094340055883 0.088871886001460329 0.24818668898370955 -0.019391006405056713 -0.19699367076393509 0.058394142001457802 -0.29527169883756982 -0.2136016646322958 0.27307052543890864 -0.13994254696307121 -0.14712807421590235 -0.11862184570558799 -0.41187898460311534 -0.38197022567420125 0.25838252855530369 0.13422665374372031 -0.19310895408227602 0.23482182837668997 -0.016105216801383618 -0.091156809545511683 0.064898228861768034 -0.042882118856279287 0.038905805970835816;-0.30447841857975 0.11522566494774236 0.22700372219806236 -0.32746913777010878 -0.00064661825775235544 0.7220862335032342 -0.34666193324634464 -0.058093597999987708 0.22321442913728032 -0.60714901517463671 -0.049531484257982719 0.26927268189352305 -0.62965368118712184 0.02927599909376526 0.37425162589380367 -0.65616304835679573 0.53485716962808516 0.29709013681309354 -0.39797267468217207 0.48477940309255735 0.44754318535058102 -0.25836743048954125 0.23648280972554728 0.18234038642661166 -0.51273598860304004 0.29006581574929508 0.44359651793468918;0.58329170605276648 -0.23067913045419564 -0.25588160017483569 0.55195689460335307 -0.028709857792390586 -0.96912540525771806 0.54338514165159557 -0.081200990899077355 -0.35425371540241535 0.85362531191410451 -0.2905893174076532 -0.26054303697938491 0.98240500645425244 0.058822592613890487 -0.41758309744721611 0.62318354276106325 -0.40278826905332532 -0.48259060046922514 0.42490988813908492 -0.45784553062967603 -0.66767778635059705 0.61155096046111823 -0.3690833567553381 -0.5390818229019757 0.64579995389389366 -0.54404372746324525 -0.51174381142599124;0.98205937636166718 -0.48386706595095424 -0.46332711311073915 0.95185321227684228 -0.11442489474685508 -1.0016293795770779 0.72616431673386272 -0.21294592571623652 -0.73833401961031309 1.0197107709213977 -0.61045845330464188 -0.2595374334302214 1.5744452579376498 0.056904163697331339 -0.39962643230463973 0.63233182945715138 -0.18476225052799719 -0.75693605283388143 0.54983481942135681 -0.58736522642385847 -0.88682160005122079 1.0522656143278193 -0.3813666330975905 -1.1396204873744817 0.86158407340521714 -0.97129555421440028 -0.57829308146409464;-1.2278326714894174 1.1754501193023046 3.1560292052626893 -2.8773002559784899 -0.66390086740669385 -0.75525679381775768 -2.0845563409014294 1.8750367163820281 2.1704438419960574 -2.1076595128778224 0.82366321170167334 1.5313830054669211 -2.6502151330403421 -0.85119839356104421 -0.077541155597038766 -1.5056690632270646 0.71876334660082775 2.4586575758546281 -2.2703537289124034 1.8006751375298555 2.9339655155041746 -2.4792960041002252 1.6028242693335866 0.21669640611202398 -2.1090859598649372 2.1800848431465552 2.6297361516279354;-0.12147678222348246 -0.3254192364488967 -0.099428016784335882 0.15922315283946106 0.11726529277688946 0.098103323027125863 0.1503129796137597 0.036242111540161492 -0.3101826828487918 0.082137387781384047 -0.19444134277188349 -0.081997803748683012 0.073772376405929055 0.0054185763183755929 -0.287615366185481 0.3883670693267855 0.11837717359647004 -0.15071751723044308 0.26540706320556323 -0.2116412118802882 -0.37159253940569031 0.20156444072672708 0.10892282922774676 -0.027671051367653094 0.057304212065668006 -0.064928307026152279 0.12346529515274815;0.037834172044130643 0.16864847669338126 -0.42501260268883323 -0.074872884932265557 -0.0090761643362479404 0.094107504971216754 0.260949610293923 -0.16687517518614881 -0.095416427964049311 0.15025231434959427 -0.023136637249340473 -0.013208490558734798 0.16060477558622138 -0.090203536375601634 -0.09610454301990351 0.12353208625076641 0.095775376878152005 -0.089724360810574486 0.042730209035905145 -0.38253519819002169 0.16767631784852308 0.0022299551090213003 0.11945243615073867 -0.060423411242530908 0.21118456912474892 -0.10401260704647697 -0.24656390783246898];
  
  % Layer 2
  b2 = -0.020989759422778885;
  LW2_1 = [-0.15990537874142929 -0.31830456028611431 1.9002508688008382 -0.17005980682407729 -0.1697814643684657 -0.4646837647233219 0.67647411101634602 -2.5390476032751428 0.23009049214745964 0.10176368669108296];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 2;
  y1_step1_xoffset = 0;
  
  % ===== SIMULATION ========
  
  % Dimensions
  Q = size(x1,2); % samples
  
  % Input 1
  xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
  
  % Layer 1
  a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);
  
  % Layer 2
  a2 = repmat(b2,1,Q) + LW2_1*a1;
  
  % Output 1
  y1 = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
